sap.ui.controller("views.ATMI.ATMI",{approveDisapprove:function(e,t){var a=new sap.m.BusyDialog({text:e+" Authority to Move-In request. Please wait..."});a.open();var o=false;var s=this;var r=this.getView().getModel().getProperty("/tranDetail");var n={action:e.toUpperCase(),RequestNumber:r.AtmiNo,approvalToCommentsSet:t};var i={Refnumber:r.AtmiNo,UpdDetailsSet:[{ActualNo:r.ActualNo,PriorityNo:r.PriorityNo,LastOrDate2:r.LastOrDate2,LastOrNo2:r.LastOrNo2,AmountPaid2:r.AmountPaid2,AmountDue2:r.AmountDue2,Requirement2:r.Requirement2,LastOrDate1:r.LastOrDate1,LastOrNo1:r.LastOrNo1,AmountPaid1:r.AmountPaid1,AmountDue1:r.AmountDue1,Requirement1:r.Requirement1,MarriageContract:UIDateTosapDate(r.MarriageContract),ViewDate:UIDateTosapDate(r.ViewDate),BirthCert:UIDateTosapDate(r.BirthCert),NoteDate:UIDateTosapDate(r.NoteDate),BirDate:UIDateTosapDate(r.BirDate),SignedDosDate:UIDateTosapDate(r.SignedDosDate),CondoDues:UIDateTosapDate(r.CondoDues),BuyerReqDate:UIDateTosapDate(r.BuyerReqDate),EmiRef:r.EmiRef,AppParking:r.AppParking,AsBuildArea:r.AsBuildArea,CtsArea:r.CtsArea,Unit:r.Unit,BuildLand:r.BuildLand,AtmiNo:r.AtmiNo,UnitTypeDesc:r.UnitTypeDesc,UnitType:r.UnitType,ReservationDate:UIDateTosapDate(r.ReservationDate),ContractNo:r.ContractNo,CoBuyer:r.CoBuyer,PBuyer:r.PBuyer,CreationDate:UIDateTosapDate(r.CreationDate),PriorityLevel:r.PriorityLevel,Bukrs:r.Bukrs,RefNo:r.AtmiNo}]};$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/approvalSet?$format=json",headers:{"X-CSRF-Token":"Fetch","X-Requested-With":"XMLHttpRequest"},async:true,contentType:"application/json",success:function(t,s,p){var u=p.getResponseHeader("X-CSRF-Token");$.ajax({type:"POST",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/UpdHeaderSet",headers:{"X-CSRF-Token":u,"X-Requested-With":"JSONHttpRequest"},async:true,contentType:"application/json",dataType:"json",data:JSON.stringify(i),success:function(t,s,i){try{$.ajax({type:"POST",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/approvalSet",headers:{"X-CSRF-Token":u,"X-Requested-With":"JSONHttpRequest"},async:false,contentType:"application/json",dataType:"json",data:JSON.stringify(n),success:function(t,s,n){try{if(t.d.Type!="S"){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR",t.d.Message);return false}showActionMsg("ATMI-"+e.toUpperCase(),"SUCCESS","",r.AtmiNo);sap.ui.getCore().byId(sessionCache["pageID"]+"oBtnApprove").setEnabled(false);sap.ui.getCore().byId(sessionCache["pageID"]+"oBtnDisapprove").setEnabled(false);sap.ui.getCore().byId(sessionCache["pageID"]+"oTAComments").setValue("");o=true;a.close()}catch(t){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR",t.message)}},error:function(t){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR","Unable to "+e+" Authority to Move-In Request.\nStatus Code: "+t.status+"\nStatus Text: "+t.statusText+"\nDescription: "+t.responseText)}})}catch(t){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR",t.message);return false}},error:function(t){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR","Unable to "+e+" Authority to Move-In Request.\nStatus Code: "+t.status+"\nStatus Text: "+t.statusText+"\nDescription: "+t.responseText);return false}})},error:function(){a.close();showActionMsg("ATMI-"+e.toUpperCase(),"ERROR",e+" Authority to Move-In Request. Unable to fecth security token.");return false}});return o}});
//# sourceMappingURL=ATMI.controller.js.map