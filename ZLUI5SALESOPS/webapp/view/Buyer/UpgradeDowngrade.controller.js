sap.ui.controller("views.Buyer.UpgradeDowngrade",{approveDisapprove:function(e,t,s){var a=new sap.m.BusyDialog({text:e+" Upgrade/Downgrade request. Please wait..."});a.open();var o=false;var n=this;var r=this.getView().getModel().getProperty("/tranDetail");var p={action:e.toUpperCase(),RequestNumber:r.Refnumber,approvalToCommentsSet:t,UpdownStatus:s};$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/approvalSet?$format=json",headers:{"X-CSRF-Token":"Fetch","X-Requested-With":"XMLHttpRequest"},async:true,contentType:"application/json",success:function(t,s,n){var i=n.getResponseHeader("X-CSRF-Token");$.ajax({type:"POST",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/approvalSet",headers:{"X-CSRF-Token":i,"X-Requested-With":"JSONHttpRequest"},async:false,contentType:"application/json",dataType:"json",data:JSON.stringify(p),success:function(t,s,n){try{if(t.d.Type!="S"){a.close();showActionMsg("UPDOWN-"+e.toUpperCase(),"ERROR",t.d.Message);return false}showActionMsg("UPDOWN-"+e.toUpperCase(),"SUCCESS","",r.Refnumber);sap.ui.getCore().byId(sessionCache["pageID"]+"oBtnApprove").setEnabled(false);sap.ui.getCore().byId(sessionCache["pageID"]+"oBtnDisapprove").setEnabled(false);sap.ui.getCore().byId(sessionCache["pageID"]+"oTAComments").setValue("");o=true;a.close()}catch(t){a.close();showActionMsg("UPDOWN-"+e.toUpperCase(),"ERROR2",t.message)}},error:function(t){a.close();showActionMsg("UPDOWN-"+e.toUpperCase(),"ERROR","Unable to "+e+" Upgrade/Downgrade Request.\nStatus Code: "+t.status+"\nStatus Text: "+t.statusText+"\nDescription: "+t.responseText)}})},error:function(){a.close();showActionMsg("UPDOWN-"+e.toUpperCase(),"ERROR",e+" Upgrade/Downgrade Request. Unable to fecth security token.")}});return o}});
//# sourceMappingURL=UpgradeDowngrade.controller.js.map