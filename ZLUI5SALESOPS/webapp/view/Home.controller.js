sap.ui.controller("view.Home",{onInit:function(){},refreshItems:function(e,t,r){var a=this;var o=new sap.m.BusyDialog({text:"Loading ACTIONS ITEMS. Please wait..."});o.open();var s=[{requestNum:"1",requestType:"UPGRADE",requestDate:"06/02/2015",itemgroup:"1",contractNum:"123456",principalBuyer:"Andy Lim",businessPartner:"",role:"",bldg_proj:"",unit:""},{requestNum:"2",requestType:"DOWNGRADE",requestDate:"06/03/2015",itemgroup:"1",contractNum:"123457",principalBuyer:"Kathy Ting",businessPartner:"",role:"",bldg_proj:"",unit:""},{requestNum:"3",requestType:"RESTRUCTURE",requestDate:"06/04/2015",itemgroup:"1",contractNum:"123458",principalBuyer:"Eva Yan",businessPartner:"",role:"",bldg_proj:"",unit:""},{requestNum:"0000000077",requestType:"Inclusion & Exclusion Of Buyer",requestDate:"06/04/2015",itemgroup:"1",contractNum:"123458",principalBuyer:"Bill Li",businessPartner:"",role:"",bldg_proj:"",unit:""},{requestNum:"0000000040",requestType:"Create Agent",requestDate:"06/04/2015",itemgroup:"2",contractNum:"123458",principalBuyer:"",businessPartner:"Kenneth Sy",role:"Sales Manager",bldg_proj:"",unit:""},{requestNum:"6",requestType:"Renew Agent",requestDate:"06/04/2015",itemgroup:"2",contractNum:"123458",principalBuyer:"",businessPartner:"Lino Co",role:"Account Manager",bldg_proj:"",unit:""},{requestNum:"7",requestType:"ATMI",requestDate:"06/01/2015",itemgroup:"3",contractNum:"223458",principalBuyer:"Allen Sia",businessPartner:"",role:"",bldg_proj:"234234",unit:"IPC0105L"},{requestNum:"8",requestType:"Plan Revision",requestDate:"07/04/2015",itemgroup:"3",contractNum:"223451",principalBuyer:"Sam Ting",businessPartner:"",role:"",bldg_proj:"564234",unit:"IPC0105D"},{requestNum:"9",requestType:"Comm Rate",requestDate:"07/09/2015",itemgroup:"3",contractNum:"243458",principalBuyer:"Tina Go",businessPartner:"",role:"",bldg_proj:"93234",unit:"IPC0105G"}];var n=new sap.ui.model.json.JSONModel;n.setData({itemsData:[]});this.getView().setModel(n);$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/actionItemsSet?$format=json",dataType:"json",success:function(a){if(!a){jQuery.sap.log.fatal("The following problem occurred: No data was retrieved by service: ")}s=a.d.results;var d,i=[],u=[],l=[];var m;for(var p=0;p<s.length;p++){m=new Date(parseInt(s[p].RequestDate)).toLocaleString();d={requestNum:s[p].RequestNumber,requestType:s[p].RequestType,requestDate:s[p].RequestDateFormatted,itemgroup:s[p].Grouping,contractNum:s[p].ContractNumber,principalBuyer:s[p].PrincipalBuyer,businessPartner:s[p].BusinessPartner,role:s[p].Role,bldg_proj:s[p].BldgprojDesc,unit:s[p].Unit,Application:s[p].Application};if(s[p].Grouping=="ADJADVICE"){i.push(d)}else if(s[p].Grouping=="MASTERDATA"){u.push(d)}else{l.push(d)}}n.setProperty("/group1",i);n.setProperty("/group2",u);n.setProperty("/group3",l);if(i.length==0){if(u.length>0){e.openSection(t)}else if(l.length>0){e.openSection(r)}}o.close()},error:function(e,t,r){var a={message:t,statusCode:e.status,statusText:e.statusText,responseText:e.responseText};jQuery.sap.log.fatal("The following problem occurred: "+t,e.responseText+","+e.status+","+e.statusText);o.close();alert("Status Code: "+e.status+"\nStatus Text: "+e.statusText+"\nMessage: "+e.responseText)}});o.close()},displayDetails:function(e){var t=this;var r;if(e.Application=="RES_INEXBUYER"){r=new sap.m.BusyDialog({text:"Retrieving Buyers details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/inexSet(Refnumber='"+e.requestNum+"')?$expand=inexToDetail,inexToApprover/approverComment,inexToRemarks,inexToDisplayOld,inexToDisplayNew&$format=json",dataType:"json",success:function(a){a.d.inexToRemarks=a.d.inexToRemarks.results;a.d.inexToDisplayOld=a.d.inexToDisplayOld.results;a.d.inexToDisplayNew=a.d.inexToDisplayNew.results;a.d.inexToApprover=a.d.inexToApprover.results;a.d.DateOfSale=sapDateFormat(a.d.DateOfSale);var o="";for(var s=0;s<a.d.inexToApprover.length;s++){o="";for(var n=0;n<a.d.inexToApprover[s].approverComment.results.length;n++){o=o+a.d.inexToApprover[s].approverComment.results[n].Line}a.d.inexToApprover[s].approverComment=o}o="";for(var s=0;s<a.d.inexToRemarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.inexToRemarks[s].Line}a.d.remarks=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Inclusion & Exclusion Of Buyer";showContent("inExApproval","views.Buyer.InclusionExclusion","Inclusion & Exclusion Of Buyer",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_BUYERINFO"){r=new sap.m.BusyDialog({text:"Retrieving Buyers details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/basicBuyerInfoSet(REFNUMBER='"+e.requestNum+"')?$expand=buyerInfoFrom,buyerInfoTo,buyerInfoAddressFrom,buyerInfoAddressTo,buyerInfoContracts,buyerInfoContractAddress,approver/approverComment,remarks,buyerInfoPassport,buyerAttyFrSet,buyerAttyToSet&$format=json",dataType:"json",success:function(a){a.d.approver=a.d.approver.results;a.d.buyerInfoFrom=a.d.buyerInfoFrom.results;a.d.buyerInfoTo=a.d.buyerInfoTo.results;a.d.buyerInfoAddressFrom=a.d.buyerInfoAddressFrom.results;a.d.buyerInfoAddressTo=a.d.buyerInfoAddressTo.results;a.d.buyerInfoContracts=a.d.buyerInfoContracts.results;a.d.buyerInfoContractAddress=a.d.buyerInfoContractAddress.results;a.d.buyerInfoPassport=a.d.buyerInfoPassport.results;a.d.buyerAttyFrSet=a.d.buyerAttyFrSet.results;a.d.buyerAttyToSet=a.d.buyerAttyToSet.results;var o="";var s="";var n="";var d="";for(var i=0;i<a.d.buyerAttyFrSet.length;i++){if(a.d.buyerAttyFrSet[i].Counter=="0001"){o=a.d.buyerAttyFrSet[i].Text}if(a.d.buyerAttyFrSet[i].Counter=="0002"){s=a.d.buyerAttyFrSet[i].Text}}for(var i=0;i<a.d.buyerAttyToSet.length;i++){if(a.d.buyerAttyToSet[i].Counter=="0001"){n=a.d.buyerAttyToSet[i].Text}if(a.d.buyerAttyToSet[i].Counter=="0002"){d=a.d.buyerAttyToSet[i].Text}}var u={Rep1From:o,Rep2From:s,Rep1To:n,Rep2To:d};a.d.buyerAttySet=u;a.d.buyerInfoTo[0].BIRTHDATE=sapDateFormat(a.d.buyerInfoTo[0].BIRTHDATE);a.d.buyerInfoFrom[0].BIRTHDATE=sapDateFormat(a.d.buyerInfoFrom[0].BIRTHDATE);a.d.buyerInfoTo[0].SPOUSE_BIRTHDATE=sapDateFormat(a.d.buyerInfoTo[0].SPOUSE_BIRTHDATE);a.d.buyerInfoFrom[0].SPOUSE_BIRTHDATE=sapDateFormat(a.d.buyerInfoFrom[0].SPOUSE_BIRTHDATE);a.d.buyerInfoTo[0].SPOUSE_RELATIONSHIP_FROM=sapDateFormat(a.d.buyerInfoTo[0].SPOUSE_RELATIONSHIP_FROM);a.d.buyerInfoFrom[0].SPOUSE_RELATIONSHIP_FROM=sapDateFormat(a.d.buyerInfoFrom[0].SPOUSE_RELATIONSHIP_FROM);a.d.buyerInfoTo[0].SPOUSE_RELATIONSHIP_TO=sapDateFormat(a.d.buyerInfoTo[0].SPOUSE_RELATIONSHIP_TO);a.d.buyerInfoFrom[0].SPOUSE_RELATIONSHIP_TO=sapDateFormat(a.d.buyerInfoFrom[0].SPOUSE_RELATIONSHIP_TO);a.d.buyerInfoPassport[0].ValidDateFrom=sapDateFormat(a.d.buyerInfoPassport[0].ValidDateFrom);a.d.buyerInfoPassport[0].ValidDateTo=sapDateFormat(a.d.buyerInfoPassport[0].ValidDateTo);var l="";for(var m=0;m<a.d.approver.length;m++){l="";for(var p=0;p<a.d.approver[m].approverComment.results.length;p++){l=l+a.d.approver[m].approverComment.results[p].Line}a.d.approver[m].approverComment=l}l="";for(var m=0;m<a.d.remarks.results.length;m++){if(l!="")l=l+"\n";l=l+a.d.remarks.results[m].Line}a.d.remarks=l;if(a.d.buyerInfoFrom[0].CITIZENSHIP_TEXT!=a.d.buyerInfoTo[0].CITIZENSHIP_TEXT){oCBICitizen=true}oBPType=a.d.buyerInfoFrom[0].BPTYPE;if(oBPType==1){if(a.d.buyerInfoFrom[0].MARITALSTATUS_TEXT=="Married"||a.d.buyerInfoTo[0].MARITALSTATUS_TEXT=="Married"){oBuyerMStatus="Married"}}t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Change Of Buyer Information";showContent("chgBuyerApproval","views.Buyer.ChangeBuyerInfo","Change Of Buyer Information",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_AREAADJUST"){r=new sap.m.BusyDialog({text:"Retrieving Area Adjustment details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/aa_headerSet(Refnumber='"+e.requestNum+"')?$expand=aa_headerToOldArea,aa_headerToNewArea,aa_headerToPaymentTerms,aa_headerToApprover/approverComment,aa_headerToRemarks&$format=json",dataType:"json",success:function(a){a.d.aa_headerToOldArea=a.d.aa_headerToOldArea.results;a.d.aa_headerToNewArea=a.d.aa_headerToNewArea.results;a.d.aa_headerToPaymentTerms=a.d.aa_headerToPaymentTerms.results;a.d.aa_headerToApprover=a.d.aa_headerToApprover.results;a.d.aa_headerToRemarks=a.d.aa_headerToRemarks.results;a.d.DateOfSale=sapDateFormat(a.d.DateOfSale);var o="";for(var s=0;s<a.d.aa_headerToApprover.length;s++){o="";for(var n=0;n<a.d.aa_headerToApprover[s].approverComment.results.length;n++){o=o+a.d.aa_headerToApprover[s].approverComment.results[n].Line}a.d.aa_headerToApprover[s].approverComment=o}o="";for(var s=0;s<a.d.aa_headerToRemarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.aa_headerToRemarks[s].Line}a.d.aa_headerToRemarks=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Area Adjustment";showContent("areaAdjustApproval","views.Buyer.AreaAdjustment","Area Adjustment",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_TRANSOWNER"){r=new sap.m.BusyDialog({text:"Retrieving Buyers details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/transownSet(Refnumber='"+e.requestNum+"',Agent='')?$expand=transownBuyerFrom,transownBuyerTo,transownToapprover/approverComment,transownToattachment,transownToremarks&$format=json",dataType:"json",success:function(a){a.d.Refnumber=e.requestNum;a.d.transownBuyerFrom=a.d.transownBuyerFrom.results;a.d.transownBuyerTo=a.d.transownBuyerTo.results;a.d.transownToapprover=a.d.transownToapprover.results;a.d.transownToremarks=a.d.transownToremarks.results;a.d.SaleDate=sapDateFormat(a.d.SaleDate);var o="";for(var s=0;s<a.d.transownToapprover.length;s++){o="";for(var n=0;n<a.d.transownToapprover[s].approverComment.results.length;n++){o=o+a.d.transownToapprover[s].approverComment.results[n].Line}a.d.transownToapprover[s].approverComment=o}o="";for(var s=0;s<a.d.transownToremarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.transownToremarks[s].Line}a.d.remarks=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Transfer of Ownership";showContent("transOwnershipApproval","views.Buyer.TransferOfOwnership","Transfer of Ownership",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_CANCELATN"){r=new sap.m.BusyDialog({text:"Retrieving Buyers details for cancellation. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/cnCancelSet(Refnumber='"+e.requestNum+"')?$expand=cnContractDetailsSet,cnParkedContractsSet,cnBuyersSet,cnContractOtherDetailsSet,cnPaymentDetailsSet,cnCommissionDetailsSet,cnCancellationDetailsSet,cnRefundSet,cnForfeitSet,cnTransferSet,cnInstructionsSet,approverSet/approverComment,cnNocRemarksSet,cnInstructionRemarksSet,cnOtherReasonSet,cnAmtConversionSet,cnRemarksSet&$format=json",dataType:"json",success:function(a){a.d.cnContractDetailsSet=a.d.cnContractDetailsSet.results;a.d.cnCancellationDetailsSet=a.d.cnCancellationDetailsSet.results;a.d.cnCancellationDetailsSet[0].Totalpaid=util.Formatter.amount(a.d.cnCancellationDetailsSet[0].Totalpaid.replace(/,/g,""));a.d.cnBuyersSet=a.d.cnBuyersSet.results;a.d.approverSet=a.d.approverSet.results;a.d.cnNocRemarksSet=a.d.cnNocRemarksSet.results;a.d.cnOtherReasonSet=a.d.cnOtherReasonSet.results;a.d.cnRefundSet=a.d.cnRefundSet.results;a.d.cnPaymentDetailsSet=a.d.cnPaymentDetailsSet.results;a.d.cnCommissionDetailsSet=a.d.cnCommissionDetailsSet.results;a.d.cnInstructionsSet=a.d.cnInstructionsSet.results;a.d.cnTransferSet=a.d.cnTransferSet.results;a.d.cnParkedContractsSet=a.d.cnParkedContractsSet.results;a.d.cnForfeitSet=a.d.cnForfeitSet.results;a.d.cnContractOtherDetailsSet=a.d.cnContractOtherDetailsSet.results;a.d.cnAmtConversionSet=a.d.cnAmtConversionSet.results;a.d.cnRemarksSet=a.d.cnRemarksSet.results;a.d.cnAmtConversionSet[0].Date=sapDateFormat(a.d.cnAmtConversionSet[0].Date);a.d.cnContractDetailsSet[0].SaleDate=sapDateFormat(a.d.cnContractDetailsSet[0].SaleDate);a.d.cnContractDetailsSet[0].TcpAmountGross=util.Formatter.amount(a.d.cnContractDetailsSet[0].TcpAmountGross.replace(/,/g,""));a.d.cnContractDetailsSet[0].TotalDiscount=util.Formatter.amount(a.d.cnContractDetailsSet[0].TotalDiscount.replace(/,/g,""));a.d.cnContractDetailsSet[0].TcpAmountNet=util.Formatter.amount(a.d.cnContractDetailsSet[0].TcpAmountNet.replace(/,/g,""));a.d.cnContractDetailsSet[0].TtfeTotal=util.Formatter.amount(a.d.cnContractDetailsSet[0].TtfeTotal.replace(/,/g,""));a.d.cnContractOtherDetailsSet[0].Aaeffectivedate=sapDateFormat(a.d.cnContractOtherDetailsSet[0].Aaeffectivedate);a.d.cnContractOtherDetailsSet[0].Lastpaiddateclr=sapDateFormat(a.d.cnContractOtherDetailsSet[0].Lastpaiddateclr);a.d.cnContractOtherDetailsSet[0].Lastpaiddate=sapDateFormat(a.d.cnContractOtherDetailsSet[0].Lastpaiddate);a.d.cnContractOtherDetailsSet[0].Arntcmailed=sapDateFormat(a.d.cnContractOtherDetailsSet[0].Arntcmailed);a.d.cnContractOtherDetailsSet[0].Nocmailed=sapDateFormat(a.d.cnContractOtherDetailsSet[0].Nocmailed);a.d.cnContractOtherDetailsSet[0].Remainingpdc=util.Formatter.amount(a.d.cnContractOtherDetailsSet[0].Remainingpdc.replace(/,/g,""));for(var o=0;o<a.d.cnParkedContractsSet.length;o++){if(a.d.cnParkedContractsSet[o].Exclude==""){a.d.cnParkedContractsSet[o].Exclude=false}else{a.d.cnParkedContractsSet[o].Exclude=true}}for(var o=0;o<a.d.cnContractOtherDetailsSet.length;o++){if(a.d.cnContractOtherDetailsSet[o].Urgent=""){a.d.cnContractOtherDetailsSet[o].Urgent=false}else{a.d.cnContractOtherDetailsSet[o].Urgent=true}}a.d.cnInstructionRemarksSet=a.d.cnInstructionRemarksSet.results;var s="";for(var o=0;o<a.d.approverSet.length;o++){s="";for(var n=0;n<a.d.approverSet[o].approverComment.results.length;n++){s=s+a.d.approverSet[o].approverComment.results[n].Line}a.d.approverSet[o].approverComment=s}s="";for(var o=0;o<a.d.cnNocRemarksSet.length;o++){if(s!="")s=s+"\n";s=s+a.d.cnNocRemarksSet[o].Line}a.d.cnNocRemarksSet=s;s="";for(var o=0;o<a.d.cnRemarksSet.length;o++){if(s!="")s=s+"\n";s=s+a.d.cnRemarksSet[o].Line}a.d.cnRemarksSet=s;s="";for(var o=0;o<a.d.cnInstructionRemarksSet.length;o++){if(s!="")s=s+"\n";s=s+a.d.cnInstructionRemarksSet[o].Line}a.d.cnInstructionRemarksSet=s;s="";for(var o=0;o<a.d.cnOtherReasonSet.length;o++){if(s!="")s=s+"\n";s=s+a.d.cnOtherReasonSet[o].Line}a.d.cnOtherReasonSet=s;t.getAttachments(a.d,e.requestNum);oRefundType=a.d.cnInstructionsSet[0].Refundtype;document.getElementById("currentItem").innerHTML=" > Contract Cancellation";showContent("contractCancellation","views.Buyer.ContractCancellation","Contract Cancellation",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_REINSTATE"){r=new sap.m.BusyDialog({text:"Retrieving Buyers details for reinstatement. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/zri_headerSet(Refnumber='"+e.requestNum+"',Agent='')?$expand=zri_adjustment,zri_contractdet,zri_deductions,zri_installment,zri_new_agents,zri_new_amt,zri_old_agents,zri_old_amt,zri_old_buyers,zri_particulars,zri_prev_payment,zri_prev_penalty,zri_related_contracts,zri_rodetail,zri_scheme,zri_scheme2,zri_spread,zri_summary_new,zri_summary_old,approver/approverComment,remarks,zri_recommendations&$format=json",dataType:"json",success:function(a){a.d.zri_recommendations=a.d.zri_recommendations.results;a.d.remarks=a.d.remarks.results;a.d.approver=a.d.approver.results;a.d.zri_summary_old=a.d.zri_summary_old.results;a.d.zri_summary_new=a.d.zri_summary_new.results;a.d.zri_spread=a.d.zri_spread.results;a.d.zri_scheme2=a.d.zri_scheme2.results;a.d.zri_scheme=a.d.zri_scheme.results;a.d.zri_rodetail=a.d.zri_rodetail.results;a.d.zri_related_contracts=a.d.zri_related_contracts.results;a.d.zri_prev_penalty=a.d.zri_prev_penalty.results;a.d.zri_prev_payment=a.d.zri_prev_payment.results;a.d.zri_particulars=a.d.zri_particulars.results;a.d.zri_old_buyers=a.d.zri_old_buyers.results;a.d.zri_old_agents=a.d.zri_old_agents.results;a.d.zri_new_agents=a.d.zri_new_agents.results;a.d.zri_new_amt=a.d.zri_new_amt.results;a.d.zri_new_amt[0].TcpGross=util.Formatter.amount(a.d.zri_new_amt[0].TcpGross.replace(/,/g,""));a.d.zri_new_amt[0].Discount=util.Formatter.amount(a.d.zri_new_amt[0].Discount.replace(/,/g,""));a.d.zri_new_amt[0].TcpNet=util.Formatter.amount(a.d.zri_new_amt[0].TcpNet.replace(/,/g,""));a.d.zri_new_amt[0].TcpPayments=util.Formatter.amount(a.d.zri_new_amt[0].TcpPayments.replace(/,/g,""));a.d.zri_new_amt[0].Deductions=util.Formatter.amount(a.d.zri_new_amt[0].Deductions.replace(/,/g,""));a.d.zri_new_amt[0].PaymentApplc=util.Formatter.amount(a.d.zri_new_amt[0].PaymentApplc.replace(/,/g,""));a.d.zri_new_amt[0].AmtReinst=util.Formatter.amount(a.d.zri_new_amt[0].AmtReinst.replace(/,/g,""));a.d.zri_new_amt[0].Ttfe=util.Formatter.amount(a.d.zri_new_amt[0].Ttfe.replace(/,/g,""));a.d.zri_old_amt=a.d.zri_old_amt.results;a.d.zri_old_amt[0].TcpGross=util.Formatter.amount(a.d.zri_old_amt[0].TcpGross.replace(/,/g,""));a.d.zri_old_amt[0].Discount=util.Formatter.amount(a.d.zri_old_amt[0].Discount.replace(/,/g,""));a.d.zri_old_amt[0].TcpNet=util.Formatter.amount(a.d.zri_old_amt[0].TcpNet.replace(/,/g,""));a.d.zri_old_amt[0].TcpPayments=util.Formatter.amount(a.d.zri_old_amt[0].TcpPayments.replace(/,/g,""));a.d.zri_old_amt[0].Deductions=util.Formatter.amount(a.d.zri_old_amt[0].Deductions.replace(/,/g,""));a.d.zri_old_amt[0].PaymentApplc=util.Formatter.amount(a.d.zri_old_amt[0].PaymentApplc.replace(/,/g,""));a.d.zri_old_amt[0].AmtReinst=util.Formatter.amount(a.d.zri_old_amt[0].AmtReinst.replace(/,/g,""));a.d.zri_old_amt[0].Ttfe=util.Formatter.amount(a.d.zri_old_amt[0].Ttfe.replace(/,/g,""));a.d.zri_installment=a.d.zri_installment.results;a.d.zri_deductions=a.d.zri_deductions.results;a.d.zri_contractdet=a.d.zri_contractdet.results;a.d.zri_adjustment=a.d.zri_adjustment.results;a.d.zri_adjustment[0].TcpGross=util.Formatter.amount(a.d.zri_adjustment[0].TcpGross.replace(/,/g,""));a.d.zri_adjustment[0].Discount=util.Formatter.amount(a.d.zri_adjustment[0].Discount.replace(/,/g,""));a.d.zri_adjustment[0].TcpNet=util.Formatter.amount(a.d.zri_adjustment[0].TcpNet.replace(/,/g,""));a.d.zri_adjustment[0].TcpPayments=util.Formatter.amount(a.d.zri_adjustment[0].TcpPayments.replace(/,/g,""));a.d.zri_adjustment[0].Deductions=util.Formatter.amount(a.d.zri_adjustment[0].Deductions.replace(/,/g,""));a.d.zri_adjustment[0].PaymentApplc=util.Formatter.amount(a.d.zri_adjustment[0].PaymentApplc.replace(/,/g,""));a.d.zri_adjustment[0].AmtReinst=util.Formatter.amount(a.d.zri_adjustment[0].AmtReinst.replace(/,/g,""));a.d.zri_adjustment[0].Ttfe=util.Formatter.amount(a.d.zri_adjustment[0].Ttfe.replace(/,/g,""));a.d.DateReinst=sapDateFormat(a.d.DateReinst);var o,s=[];for(var n=0;n<a.d.zri_old_buyers.length;n++){if(a.d.zri_old_buyers[n].Rltxt=="Principal Buyer"){a.d.oldprinbuyer=a.d.zri_old_buyers[n].Name}if(a.d.zri_old_buyers[n].Rltxt=="Co-buyer"){o={Name:a.d.zri_new_agents[n].Name};s.push(o)}}a.d.oldcobuyers=s;s=[];for(var n=0;n<a.d.zri_new_agents.length;n++){if(a.d.zri_new_agents[n].Rltxt=="Principal Buyer"){a.d.newprinbuyer=a.d.zri_new_agents[n].Name}if(a.d.zri_new_agents[n].Rltxt=="Co-buyer"){o={Name:a.d.zri_new_agents[n].Name};s.push(o)}if(a.d.zri_new_agents[n].RoleType=="ZRS200"||a.d.zri_new_agents[n].RoleType=="ZRS201"){a.d.newamagent=a.d.zri_new_agents[n].Name}if(a.d.zri_new_agents[n].RoleType=="ZRS220"||a.d.zri_new_agents[n].RoleType=="ZRS221"){a.d.newsmagent=a.d.zri_new_agents[n].Name}if(a.d.zri_new_agents[n].RoleType=="ZRS241"||a.d.zri_new_agents[n].RoleType=="ZRS242"){a.d.newsdagent=a.d.zri_new_agents[n].Name}}a.d.newcobuyers=s;for(var n=0;n<a.d.zri_old_agents.length;n++){if(a.d.zri_old_agents[n].RoleType=="ZRS200"||a.d.zri_old_agents[n].RoleType=="ZRS201"){a.d.oldamagent=a.d.zri_old_agents[n].Name}if(a.d.zri_old_agents[n].RoleType=="ZRS220"||a.d.zri_old_agents[n].RoleType=="ZRS221"){a.d.oldsmagent=a.d.zri_old_agents[n].Name}if(a.d.zri_old_agents[n].RoleType=="ZRS241"||a.d.zri_old_agents[n].RoleType=="ZRS242"){a.d.oldsdagent=a.d.zri_old_agents[n].Name}}var d="";for(var n=0;n<a.d.approver.length;n++){d="";for(var i=0;i<a.d.approver[n].approverComment.results.length;i++){d=d+a.d.approver[n].approverComment.results[i].Line}a.d.approver[n].approverComment=d}d="";for(var n=0;n<a.d.zri_recommendations.length;n++){if(d!="")d=d+"\n";d=d+a.d.zri_recommendations[n].Line}a.d.zri_recommendations=d;d="";for(var n=0;n<a.d.remarks.length;n++){if(d!="")d=d+"\n";d=d+a.d.remarks[n].Line}a.d.remarks=d;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Reinstatement";showContent("reInstatement","views.Buyer.Reinstatement","Reinstatement",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_UPDWNGRADE"){r=new sap.m.BusyDialog({text:"Retrieving Upgrade/Downgrade details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/ud_headerSet(Refnumber='"+e.requestNum+"')?$expand=Remarks,RelatedContracts,Approver/approverComment,Recommendation,Particulars,PaySchedule,Totals,CurrentUnit,NewUnit,CurrentScheme,ProposedScheme,CurrentAmount,ProposedAmount,Adjustment&$format=json",dataType:"json",success:function(a){a.d.Approver=a.d.Approver.results;a.d.Remarks=a.d.Remarks.results;a.d.Recommendation=a.d.Recommendation.results;a.d.Particulars=a.d.Particulars.results;a.d.RelatedContracts=a.d.RelatedContracts.results;if(a.d.Particulars.length>0){for(var o=0;o<a.d.Particulars.length;o++){a.d.Particulars[o].Amount=util.Formatter.amount(a.d.Particulars[o].Amount.replace(/,/g,""));a.d.Particulars[o].AmountPaid=util.Formatter.amount(a.d.Particulars[o].AmountPaid.replace(/,/g,""))}}if(a.d.RelatedContracts.length>0){for(var o=0;o<a.d.RelatedContracts.length;o++){a.d.RelatedContracts[o].Tcp=util.Formatter.amount(a.d.RelatedContracts[o].Tcp.replace(/,/g,""));a.d.RelatedContracts[o].TotalPayments=util.Formatter.amount(a.d.RelatedContracts[o].TotalPayments.replace(/,/g,""))}}a.d.PaySchedule=a.d.PaySchedule.results;if(a.d.PaySchedule.length>0){for(var o=0;o<a.d.PaySchedule.length;o++){a.d.PaySchedule[o].Tcp=util.Formatter.amount(a.d.PaySchedule[o].Tcp.replace(/,/g,""));a.d.PaySchedule[o].Ttfe=util.Formatter.amount(a.d.PaySchedule[o].Ttfe.replace(/,/g,""));a.d.PaySchedule[o].Total=util.Formatter.amount(a.d.PaySchedule[o].Total.replace(/,/g,""));a.d.PaySchedule[o].DueDate=sapDateFormat(a.d.PaySchedule[o].DueDate)}}a.d.Adjustment=a.d.Adjustment.results;if(a.d.Adjustment.length>0){a.d.Adjustment[0].GrossTcp=util.Formatter.amount(a.d.Adjustment[0].GrossTcp.replace(/,/g,""));a.d.Adjustment[0].Discount=util.Formatter.amount(a.d.Adjustment[0].Discount.replace(/,/g,""));a.d.Adjustment[0].NetTcp=util.Formatter.amount(a.d.Adjustment[0].NetTcp.replace(/,/g,""));a.d.Adjustment[0].Ttfe=util.Formatter.amount(a.d.Adjustment[0].Ttfe.replace(/,/g,""));a.d.Adjustment[0].FibAdj=util.Formatter.amount(a.d.Adjustment[0].FibAdj.replace(/,/g,""))}a.d.CurrentAmount=a.d.CurrentAmount.results;if(a.d.CurrentAmount.length>0){a.d.CurrentAmount[0].GrossTcp=util.Formatter.amount(a.d.CurrentAmount[0].GrossTcp.replace(/,/g,""));a.d.CurrentAmount[0].Discount=util.Formatter.amount(a.d.CurrentAmount[0].Discount.replace(/,/g,""));a.d.CurrentAmount[0].NetTcp=util.Formatter.amount(a.d.CurrentAmount[0].NetTcp.replace(/,/g,""));a.d.CurrentAmount[0].TotalTcp=util.Formatter.amount(a.d.CurrentAmount[0].TotalTcp.replace(/,/g,""));a.d.CurrentAmount[0].AppliedPay=util.Formatter.amount(a.d.CurrentAmount[0].AppliedPay.replace(/,/g,""));a.d.CurrentAmount[0].Ttfe=util.Formatter.amount(a.d.CurrentAmount[0].Ttfe.replace(/,/g,""));a.d.CurrentAmount[0].FibAdj=util.Formatter.amount(a.d.CurrentAmount[0].FibAdj.replace(/,/g,""))}a.d.ProposedScheme=a.d.ProposedScheme.results;if(a.d.ProposedScheme.length>0){a.d.ProposedScheme[0].ReserveFee=util.Formatter.amount(a.d.ProposedScheme[0].ReserveFee.replace(/,/g,""))}a.d.CurrentScheme=a.d.CurrentScheme.results;if(a.d.CurrentScheme.length>0){a.d.CurrentScheme[0].ReserveFee=util.Formatter.amount(a.d.CurrentScheme[0].ReserveFee.replace(/,/g,""))}a.d.NewUnit=a.d.NewUnit.results;a.d.CurrentUnit=a.d.CurrentUnit.results;a.d.ProposedAmount=a.d.ProposedAmount.results;if(a.d.ProposedAmount.length>0){a.d.ProposedAmount[0].GrossTcp=util.Formatter.amount(a.d.ProposedAmount[0].GrossTcp.replace(/,/g,""));a.d.ProposedAmount[0].Discount=util.Formatter.amount(a.d.ProposedAmount[0].Discount.replace(/,/g,""));a.d.ProposedAmount[0].NetTcp=util.Formatter.amount(a.d.ProposedAmount[0].NetTcp.replace(/,/g,""));a.d.ProposedAmount[0].Ttfe=util.Formatter.amount(a.d.ProposedAmount[0].Ttfe.replace(/,/g,""));a.d.ProposedAmount[0].FibAdj=util.Formatter.amount(a.d.ProposedAmount[0].FibAdj.replace(/,/g,""))}a.d.Totals=a.d.Totals.results;a.d.Date=sapDateFormat(a.d.Date);var s="";for(var o=0;o<a.d.Approver.length;o++){s="";for(var n=0;n<a.d.Approver[o].approverComment.results.length;n++){s=s+a.d.Approver[o].approverComment.results[n].Line}a.d.Approver[o].approverComment=s}s="";for(var o=0;o<a.d.Remarks.length;o++){if(s!="")s=s+"\n";s=s+a.d.Remarks[o].Line}a.d.Remarks=s;s="";for(var o=0;o<a.d.Recommendation.length;o++){if(s!="")s=s+"\n";s=s+a.d.Recommendation[o].Line}a.d.Recommendation=s;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Upgrade/Downgrade";showContent("upgradeDowngrade","views.Buyer.UpgradeDowngrade","Upgrade/Downgrade",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_PNLTYWAIVE"){r=new sap.m.BusyDialog({text:"Retrieving Waiver of Penalties details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/pw_headerSet(RefNumber='"+e.requestNum+"')?$format=json&$expand=pw_contractdetSet,pw_overdueitemsSet,pw_appfromSet,pw_apptoSet,approverSet/approverComment,attachmentSet,pw_requestSet,pw_backgroundSet,pw_recommendationSet,pw_instructionsSet,pw_futureinstructionsSet",dataType:"json",success:function(a){a.d.RefNumber=e.requestNum;a.d.approverSet=a.d.approverSet.results;a.d.pw_overdueitemsSet=a.d.pw_overdueitemsSet.results;var o=0;var s=0;var n=0;var d=0;var i=0;var u=0;for(var l=0;l<a.d.pw_overdueitemsSet.length;l++){o=o+Number(a.d.pw_overdueitemsSet[l].AmountDue.replace(/,/g,""));s=s+Number(a.d.pw_overdueitemsSet[l].PaidPenalty.replace(/,/g,""));n=n+Number(a.d.pw_overdueitemsSet[l].UnpaidPenalty.replace(/,/g,""));d=d+Number(a.d.pw_overdueitemsSet[l].Total.replace(/,/g,""));i=i+Number(a.d.pw_overdueitemsSet[l].Collectible.replace(/,/g,""));u=u+Number(a.d.pw_overdueitemsSet[l].ForWaiver.replace(/,/g,""))}a.d.TotalOverdueSet={TotalAmountDue:util.Formatter.amount(o),TotalPaidPenalty:util.Formatter.amount(s),TotalUnpaidPenalty:util.Formatter.amount(n),TotalOverDue:util.Formatter.amount(d),TotalCollectible:util.Formatter.amount(i),TotalForWaiver:util.Formatter.amount(u)};a.d.attachmentSet=a.d.attachmentSet.results;a.d.pw_appfromSet=a.d.pw_appfromSet.results;a.d.pw_apptoSet=a.d.pw_apptoSet.results;a.d.pw_contractdetSet=a.d.pw_contractdetSet.results;a.d.pw_requestSet=a.d.pw_requestSet.results;a.d.pw_recommendationSet=a.d.pw_recommendationSet.results;a.d.pw_instructionsSet=a.d.pw_instructionsSet.results;a.d.pw_backgroundSet=a.d.pw_backgroundSet.results;a.d.pw_futureinstructionsSet=a.d.pw_futureinstructionsSet.results;assessdate=a.d.AssessedDate;var m="";for(var p=0;p<a.d.approverSet.length;p++){for(var c=0;c<a.d.approverSet[p].approverComment.results.length;c++){m=m+a.d.approverSet[p].approverComment.results[c].Line}a.d.approverSet[p].approverComment=m;m="";var S;var _="/sap/bc/ui2/start_up";var T=null;T=new XMLHttpRequest;T.onreadystatechange=function(){if(T.readyState==4&&T.status==200){var e=JSON.parse(T.responseText);console.log(e);S=e.id}};T.open("GET",_,false);T.send(null);if(a.d.approverSet[p].UserName===S){oShowEscalate=a.d.approverSet[p].Escalate}}m="";for(var p=0;p<a.d.pw_requestSet.length;p++){if(m!="")m=m+"\n";m=m+a.d.pw_requestSet[p].Line}a.d.pw_requestSet=m;m="";for(var p=0;p<a.d.pw_recommendationSet.length;p++){if(m!="")m=m+"\n";m=m+a.d.pw_recommendationSet[p].Line}a.d.pw_recommendationSet=m;m="";for(var p=0;p<a.d.pw_instructionsSet.length;p++){if(m!="")m=m+"\n";m=m+a.d.pw_instructionsSet[p].Line}a.d.pw_instructionsSet=m;m="";for(var p=0;p<a.d.pw_backgroundSet.length;p++){if(m!="")m=m+"\n";m=m+a.d.pw_backgroundSet[p].Line}a.d.pw_backgroundSet=m;m="";for(var p=0;p<a.d.pw_futureinstructionsSet.length;p++){if(m!="")m=m+"\n";m=m+a.d.pw_futureinstructionsSet[p].Line}a.d.pw_futureinstructionsSet=m;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Waiver of Penalties";showContent("upgradeDowngrade","views.Buyer.WaiverPenalties","Waiver of Penalties",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_CRTEAGENT"){r=new sap.m.BusyDialog({text:"Retrieving New Agent details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/basicInfoSet(Refnumber='"+e.requestNum+"',Agent='')?$expand=basicInfoToAddressInfo,basicInfoToApprover/approverComment,basicInfoToCommission,basicInfoToContract1,basicInfoToUpline,basicInfoToRemarks,basicInfoToSpecialCommission,terminateSet,basicInfoTobasicInfo2,basicInfoToOldbasicInfo2,basicInfoTobankDetails,basicInfoToOldbankDetails&$format=json",dataType:"json",success:function(a){a.d.Birthdate=sapDateFormat(a.d.Birthdate);oAgentTitle=a.d.TitleText;a.d.basicInfoToUpline=a.d.basicInfoToUpline.results;if(a.d.basicInfoToUpline.length>0){a.d.basicInfoToUpline[0].ValidFrom=sapDateFormat(a.d.basicInfoToUpline[0].ValidFrom);a.d.basicInfoToUpline[0].ValidTo=sapDateFormat(a.d.basicInfoToUpline[0].ValidTo)}a.d.basicInfoToRemarks=a.d.basicInfoToRemarks.results;a.d.basicInfoToApprover=a.d.basicInfoToApprover.results;a.d.basicInfoToAddressInfo=a.d.basicInfoToAddressInfo.results;a.d.basicInfoToContract1=a.d.basicInfoToContract1.results;a.d.basicInfoToContract1[0].Contractstart=sapDateFormat(a.d.basicInfoToContract1[0].Contractstart);a.d.basicInfoToContract1[0].Contractend=sapDateFormat(a.d.basicInfoToContract1[0].Contractend);a.d.basicInfoToContract1[0].AgentAllowance=util.Formatter.amount(a.d.basicInfoToContract1[0].AgentAllowance);a.d.basicInfoToCommission=a.d.basicInfoToCommission.results;a.d.basicInfoToSpecialCommission=a.d.basicInfoToSpecialCommission.results;a.d.terminateSet=a.d.terminateSet.results;a.d.basicInfoTobasicInfo2=a.d.basicInfoTobasicInfo2.results;a.d.basicInfoTobasicInfo2[0].ReblExpdate=sapDateFormat(a.d.basicInfoTobasicInfo2[0].ReblExpdate);a.d.basicInfoToOldbasicInfo2=a.d.basicInfoToOldbasicInfo2.results;a.d.basicInfoToOldbasicInfo2[0].ReblExpdate=sapDateFormat(a.d.basicInfoToOldbasicInfo2[0].ReblExpdate);a.d.basicInfoTobankDetails=a.d.basicInfoTobankDetails.results;a.d.basicInfoToOldbankDetails=a.d.basicInfoToOldbankDetails.results;var o="";for(var s=0;s<a.d.basicInfoToApprover.length;s++){o="";for(var n=0;n<a.d.basicInfoToApprover[s].approverComment.results.length;n++){o=o+a.d.basicInfoToApprover[s].approverComment.results[n].Line}a.d.basicInfoToApprover[s].approverComment=o}o="";for(var s=0;s<a.d.basicInfoToRemarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.basicInfoToRemarks[s].Line}a.d.remarks=o;o="";for(var s=0;s<a.d.terminateSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.terminateSet[s].Line}a.d.termRemarks=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > New Agent";showContent("newAgentApproval","views.Agent.NewAgent","Create New Agent",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected Agent.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_RENWAGENT"||e.Application=="RES_AGENTINFO"){r=new sap.m.BusyDialog({text:"Retrieving Agent details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/basicInfoSet(Refnumber='"+e.requestNum+"',Agent='')?$expand=basicInfoToAddressInfo,basicInfoToApprover/approverComment,basicInfoToCommission,basicInfoToContract1,basicInfoToUpline,basicInfoToRemarks,basicInfoToSpecialCommission,basicInfoToOldbasicInfo,basicInfoToOldAddressInfo,basicInfoToOldContract1,basicInfoToOldUpline,basicInfoToOldSpecialCommission,terminateSet,basicInfoTobasicInfo2,basicInfoToOldbasicInfo2,basicInfoTobankDetails,basicInfoToOldbankDetails&$format=json",dataType:"json",success:function(a){a.d.Birthdate=sapDateFormat(a.d.Birthdate);a.d.basicInfoToOldbasicInfo=a.d.basicInfoToOldbasicInfo.results;a.d.basicInfoToUpline=a.d.basicInfoToUpline.results;a.d.basicInfoToOldUpline=a.d.basicInfoToOldUpline.results;a.d.basicInfoToRemarks=a.d.basicInfoToRemarks.results;a.d.basicInfoToApprover=a.d.basicInfoToApprover.results;a.d.basicInfoToAddressInfo=a.d.basicInfoToAddressInfo.results;a.d.basicInfoToOldAddressInfo=a.d.basicInfoToOldAddressInfo.results;a.d.basicInfoToContract1=a.d.basicInfoToContract1.results;a.d.basicInfoToOldbasicInfo[0].Birthdate=sapDateFormat(a.d.basicInfoToOldbasicInfo[0].Birthdate);a.d.basicInfoToContract1[0].Contractstart=sapDateFormat(a.d.basicInfoToContract1[0].Contractstart);a.d.basicInfoToContract1[0].Contractend=sapDateFormat(a.d.basicInfoToContract1[0].Contractend);a.d.basicInfoToContract1[0].AgentAllowance=util.Formatter.amount2(a.d.basicInfoToContract1[0].AgentAllowance);a.d.basicInfoToOldContract1=a.d.basicInfoToOldContract1.results;a.d.basicInfoToOldContract1[0].Contractstart=sapDateFormat(a.d.basicInfoToOldContract1[0].Contractstart);a.d.basicInfoToOldContract1[0].Contractend=sapDateFormat(a.d.basicInfoToOldContract1[0].Contractend);a.d.basicInfoToOldContract1[0].AgentAllowance=util.Formatter.amount(a.d.basicInfoToOldContract1[0].AgentAllowance);a.d.basicInfoToCommission=a.d.basicInfoToCommission.results;a.d.basicInfoToSpecialCommission=a.d.basicInfoToSpecialCommission.results;a.d.basicInfoToOldSpecialCommission=a.d.basicInfoToOldSpecialCommission.results;a.d.terminateSet=a.d.terminateSet.results;a.d.basicInfoTobasicInfo2=a.d.basicInfoTobasicInfo2.results;a.d.basicInfoTobasicInfo2[0].ReblExpdate=sapDateFormat(a.d.basicInfoTobasicInfo2[0].ReblExpdate);a.d.basicInfoToOldbasicInfo2=a.d.basicInfoToOldbasicInfo2.results;a.d.basicInfoToOldbasicInfo2[0].ReblExpdate=sapDateFormat(a.d.basicInfoToOldbasicInfo2[0].ReblExpdate);a.d.basicInfoTobankDetails=a.d.basicInfoTobankDetails.results;a.d.basicInfoToOldbankDetails=a.d.basicInfoToOldbankDetails.results;var o="";for(var s=0;s<a.d.basicInfoToApprover.length;s++){o="";for(var n=0;n<a.d.basicInfoToApprover[s].approverComment.results.length;n++){o=o+a.d.basicInfoToApprover[s].approverComment.results[n].Line}a.d.basicInfoToApprover[s].approverComment=o}o="";for(var s=0;s<a.d.basicInfoToRemarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.basicInfoToRemarks[s].Line}a.d.remarks=o;o="";for(var s=0;s<a.d.terminateSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.terminateSet[s].Line}a.d.termRemarks=o;t.getAttachments(a.d,e.requestNum);if(e.Application=="RES_RENWAGENT"){document.getElementById("currentItem").innerHTML=" > Renew Agent Contract";showContent("renewAgentApproval","views.Agent.RenewAgent","Renew Agent Contract",a.d)}else{document.getElementById("currentItem").innerHTML=" > Change Agent Info";showContent("updateAgentApproval","views.Agent.UpdateAgent","Change Agent Info",a.d)}r.close()},error:function(e){r.close();alert("No data retrieved for the selected Agent.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_ATMI"){r=new sap.m.BusyDialog({text:"Retrieving Authority to Move-In details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/ATMI_DetailsSet(RefNo='"+e.requestNum+"')?$expand=ATMI_AMR_DetailSet,financial_instSet,reasonSet,remarksSet,approverSet/approverComment&$format=json",dataType:"json",success:function(a){a.d.CondoDues=sapDateFormat(a.d.CondoDues);a.d.ReservationDate=sapDateFormat(a.d.ReservationDate);a.d.CreationDate=sapDateFormat(a.d.CreationDate);if(a.d.BuyerReqDate=="00000000")a.d.BuyerReqDate="";if(a.d.SignedDosDate=="00000000")a.d.SignedDosDate="";if(a.d.BirDate=="00000000")a.d.BirDate="";if(a.d.NoteDate=="00000000")a.d.NoteDate="";if(a.d.BirthCert=="00000000")a.d.BirthCert="";if(a.d.ViewDate=="00000000")a.d.ViewDate="";if(a.d.MarriageContract=="00000000")a.d.MarriageContract="";oDatepicker=a.d.BuyerReqDate;a.d.ATMI_AMR_DetailSet=a.d.ATMI_AMR_DetailSet.results;a.d.financial_instSet=a.d.financial_instSet.results;a.d.reasonSet=a.d.reasonSet.results;a.d.remarksSet=a.d.remarksSet.results;a.d.approverSet=a.d.approverSet.results;var o="";for(var s=0;s<a.d.approverSet.length;s++){o="";for(var n=0;n<a.d.approverSet[s].approverComment.results.length;n++){o=o+a.d.approverSet[s].approverComment.results[n].Line}a.d.approverSet[s].approverComment=o}o="";for(var s=0;s<a.d.reasonSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.reasonSet[s].Line}a.d.reasonSet=o;o="";for(var s=0;s<a.d.remarksSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.remarksSet[s].Line}a.d.remarksSet=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Authority to Move-In";showContent("ATMI","views.ATMI.ATMI","ATMI",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_EMI"){r=new sap.m.BusyDialog({text:"Retrieving Early Move-In details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/EMI_GetDetailsSet(RefNumber='"+e.requestNum+"')?$expand=EMI_HeaderSet,EMI_PaymentSet,EMI_PayReqSet,EMI_OperReqSet,EMI_ScheduleSet,EMI_Remarks1Set,EMI_Remarks2Set,EMI_Remarks3Set,approverSet/approverComment,EMI_OtherReqSet&$format=json",dataType:"json",success:function(a){a.d.RefNumber=e.requestNum;a.d.EMI_HeaderSet=a.d.EMI_HeaderSet.results;a.d.EMI_PaymentSet=a.d.EMI_PaymentSet.results;a.d.EMI_PayReqSet=a.d.EMI_PayReqSet.results;a.d.EMI_ScheduleSet=a.d.EMI_ScheduleSet.results;a.d.EMI_OperReqSet=a.d.EMI_OperReqSet.results;a.d.approverSet=a.d.approverSet.results;a.d.EMI_Remarks1Set=a.d.EMI_Remarks1Set.results;a.d.EMI_Remarks2Set=a.d.EMI_Remarks2Set.results;a.d.EMI_Remarks3Set=a.d.EMI_Remarks3Set.results;a.d.EMI_OtherReqSet=a.d.EMI_OtherReqSet.results;a.d.EMI_HeaderSet[0].CreationDate=sapDateFormat(a.d.EMI_HeaderSet[0].CreationDate);a.d.EMI_HeaderSet[0].SaleDate=sapDateFormat(a.d.EMI_HeaderSet[0].SaleDate);a.d.EMI_ScheduleSet[0].ReleaseDate=sapDateFormat(a.d.EMI_ScheduleSet[0].ReleaseDate);a.d.EMI_ScheduleSet[0].ATMIRegDate=sapDateFormat(a.d.EMI_ScheduleSet[0].ATMIRegDate);a.d.EMI_OtherReqSet[0].PreApprove=sapDateFormat(a.d.EMI_OtherReqSet[0].PreApprove);a.d.EMI_OtherReqSet[0].ATMIRegDate=util.Formatter.amount(a.d.EMI_OtherReqSet[0].DuoAmount);for(var o=0;o<a.d.EMI_PaymentSet.length;o++){a.d.payments=[{Particular:"Total Contract Price(TCP)",DueAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TcpDue),PaidAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TcpPaid),BalAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TcpBalance),Remarks:""},{Particular:"TTFE/Conversion Fees",DueAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TtfeDue),PaidAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TtfePaid),BalAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TtfeBalance),Remarks:""},{Particular:"Penalties/Others",DueAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].PenaltyDue),PaidAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].PenaltyPaid),BalAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].PenaltyBalance),Remarks:""},{Particular:"Total",DueAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TotalDue),PaidAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TotalPaid),BalAmt:util.Formatter.amount(a.d.EMI_PaymentSet[o].TotalBalance),Remarks:""},{Particular:"TCP Paid Percentage",DueAmt:a.d.EMI_PaymentSet[o].TcpPaidDue,PaidAmt:a.d.EMI_PaymentSet[o].TcpPaidPaid,BalAmt:a.d.EMI_PaymentSet[o].TcpPaidBalance,Remarks:""}]}for(var o=0;o<a.d.EMI_OperReqSet.length;o++){a.d.Operations=[{Particular:"Signed COL Received Date",Date1:sapDateFormat(a.d.EMI_OperReqSet[o].SignedCTS),Remarks:""},{Particular:"Signed DAS/DOASPS Received Date",Date1:sapDateFormat(a.d.EMI_OperReqSet[o].SignedDAS),Remarks:""},{Particular:"BIR 1904",Date1:sapDateFormat(a.d.EMI_OperReqSet[o].BIR1904),Remarks:""},{Particular:"PDC Undertaking",Date1:sapDateFormat(a.d.EMI_OperReqSet[o].PDCUndertaking),Remarks:""},{Particular:"TIN",Date1:a.d.EMI_OperReqSet[o].Tin,Remarks:""}]}var s="";for(var o=0;o<a.d.approverSet.length;o++){s="";for(var n=0;n<a.d.approverSet[o].approverComment.results.length;n++){s=s+a.d.approverSet[o].approverComment.results[n].Line}a.d.approverSet[o].approverComment=s}s="";for(var o=0;o<a.d.EMI_Remarks1Set.length;o++){if(s!="")s=s+"\n";s=s+a.d.EMI_Remarks1Set[o].Line}a.d.EMI_Remarks1Set=s;s="";for(var o=0;o<a.d.EMI_Remarks2Set.length;o++){if(s!="")s=s+"\n";s=s+a.d.EMI_Remarks2Set[o].Line}a.d.EMI_Remarks2Set=s;s="";for(var o=0;o<a.d.EMI_Remarks3Set.length;o++){if(s!="")s=s+"\n";s=s+a.d.EMI_Remarks3Set[o].Line}a.d.EMI_Remarks3Set=s;oEMI_Type=a.d.EMI_HeaderSet[0].Type;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Early Move-In";showContent("EMI","views.Buyer.EarlyMoveIn","EMI",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_COMM_RATE"){r=new sap.m.BusyDialog({text:"Retrieving Change in Commission Rate details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/cr1ComRateSet(Refnumber='"+e.requestNum+"')?$format=json&$expand=cr2DetailsSet,cr3CommentSet,cr4RemarksSet,cr5ApproversSet/cr5CommentsSet",dataType:"json",success:function(a){a.d.cr2DetailsSet=a.d.cr2DetailsSet.results;a.d.cr3CommentSet=a.d.cr3CommentSet.results;a.d.cr4RemarksSet=a.d.cr4RemarksSet.results;a.d.cr5ApproversSet=a.d.cr5ApproversSet.results;a.d.EffectDate=sapDateFormat(a.d.EffectDate);a.d.DateReq=sapDateFormat(a.d.DateReq);var o="";for(var s=0;s<a.d.cr5ApproversSet.length;s++){o="";for(var n=0;n<a.d.cr5ApproversSet[s].cr5CommentsSet.results.length;n++){o=o+a.d.cr5ApproversSet[s].cr5CommentsSet.results[n].Line}a.d.cr5ApproversSet[s].cr5CommentsSet=o}o="";for(var s=0;s<a.d.cr3CommentSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.cr3CommentSet[s].Line}a.d.cr3CommentSet=o;o="";for(var s=0;s<a.d.cr4RemarksSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.cr4RemarksSet[s].Line}a.d.cr4RemarksSet=o;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Change in Commission Rate";showContent("COMMRATE","views.Seller.CommissionRate","COMMRATE",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_ROUTESHEET"){r=new sap.m.BusyDialog({text:"Retrieving Route Sheet details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/zrs_routesheet_mainSet(RefNumber='"+e.requestNum+"')?$expand=zrs_routesheet_headerSet,zrs_routesheet_detailsSet,approverSet/approverComment,inputData&$format=json",dataType:"json",success:function(a){a.d.approverSet=a.d.approverSet.results;a.d.zrs_routesheet_headerSet=a.d.zrs_routesheet_headerSet.results;a.d.zrs_routesheet_detailsSet=a.d.zrs_routesheet_detailsSet.results;a.d.zrs_routesheet_headerSet[0].Contractprice=util.Formatter.amount(a.d.zrs_routesheet_headerSet[0].Contractprice);a.d.zrs_routesheet_headerSet[0].Totalarea=util.Formatter.amount(a.d.zrs_routesheet_headerSet[0].Totalarea);a.d.zrs_routesheet_headerSet[0].SaleDate=sapDateFormat(a.d.zrs_routesheet_headerSet[0].SaleDate);a.d.zrs_routesheet_headerSet[0].Date=sapDateFormat(a.d.zrs_routesheet_headerSet[0].Date);a.d.zrs_routesheet_headerSet[0].Aadate=sapDateFormat(a.d.zrs_routesheet_headerSet[0].Aadate);a.d.zrs_routesheet_detailsSet[0].CValidFrom=sapDateFormat(a.d.zrs_routesheet_detailsSet[0].CValidFrom);if(a.d.zrs_routesheet_detailsSet[0].NValidFrom=="00000000"){a.d.zrs_routesheet_detailsSet[0].NValidFrom=(new Date).format("yyyymmdd")}a.d.zrs_routesheet_detailsSet[0].Currentunitprice=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Currentunitprice);a.d.zrs_routesheet_detailsSet[0].Newunitprice=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Newunitprice);a.d.zrs_routesheet_detailsSet[0].Mcondolotarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Mcondolotarea);a.d.zrs_routesheet_detailsSet[0].Bcondolotarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Bcondolotarea);a.d.zrs_routesheet_detailsSet[0].Mbalconyarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Mbalconyarea);a.d.zrs_routesheet_detailsSet[0].Bbalconyarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Bbalconyarea);a.d.zrs_routesheet_detailsSet[0].Mgardenarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Mgardenarea);a.d.zrs_routesheet_detailsSet[0].Bgardenarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Bgardenarea);a.d.zrs_routesheet_detailsSet[0].Macledgearea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Macledgearea);a.d.zrs_routesheet_detailsSet[0].Bacledgearea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Bacledgearea);a.d.zrs_routesheet_detailsSet[0].Mtotalarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Mtotalarea);a.d.zrs_routesheet_detailsSet[0].Btotalarea=util.Formatter.amount(a.d.zrs_routesheet_detailsSet[0].Btotalarea);var o="";for(var s=0;s<a.d.approverSet.length;s++){o="";for(var n=0;n<a.d.approverSet[s].approverComment.results.length;n++){o=o+a.d.approverSet[s].approverComment.results[n].Line}a.d.approverSet[s].approverComment=o;a.d.approverSet[s].CompleteName1=a.d.approverSet[s].CompleteName;var d=a.d.approverSet[s].CompleteName.split("/");a.d.approverSet[s].CompleteName=d[2];a.d.approverSet[s].Department=d[1]}t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Route Sheet";showContent("ROUTESHEET","views.RouteSheet.RouteSheet","ROUTESHEET",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_KBINCENTIVE"){r=new sap.m.BusyDialog({text:"Retrieving KB Incentive details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/SAP/ZGW_RLC_SALES_SRV/kb01refnumberSet(Refnumber='"+e.requestNum+"')?$format=json&$expand=kb02terx_reasonSet,kb03schemeSet,kb04scheme_2Set,kb05approversSet,kb06headerSet,kb07proposed_schedSet,kb08adjustment_schedSet,kb09summary_proposedSet,kb10summary_proposed_2Set,kb11deductionsSet,kb12discountsSet,kb13resubmissionSet,kb14contractdetail_expandedSet,kb15current_priceSet,kb16buyerSet,kb17agentSet,kb18related_contractsSet,kb19paymentsSet,kb20penaltiesSet,kb21summary_oldSet,kb22summary_old_1Set,kb23summary_old_2Set,kb24summary_newSet,kb25summary_new_1Set,kb26summary_new_2Set,kb27installmentSet,kb28particularsSet,kb29scheduleSet,kb30spreadSet,kb31remarksSet,kb32save_reasonSet,kb33recommendationSet,kb34current_schedSet",dataType:"json",success:function(e){e.d.kb02terx_reasonSet=e.d.kb02terx_reasonSet.results;e.d.kb03schemeSet=e.d.kb03schemeSet.results;e.d.kb04scheme_2Set=e.d.kb04scheme_2Set.results;e.d.kb05approversSet=e.d.kb05approversSet.results;e.d.kb06headerSet=e.d.kb06headerSet.results;e.d.kb07proposed_schedSet=e.d.kb07proposed_schedSet.results;e.d.kb07proposed_schedSet[0].GrossTcp=util.Formatter.amount(e.d.kb07proposed_schedSet[0].GrossTcp);e.d.kb07proposed_schedSet[0].Discount=util.Formatter.amount(e.d.kb07proposed_schedSet[0].Discount);e.d.kb07proposed_schedSet[0].NetTcp=util.Formatter.amount(e.d.kb07proposed_schedSet[0].NetTcp);e.d.kb07proposed_schedSet[0].Ttfe=util.Formatter.amount(e.d.kb07proposed_schedSet[0].Ttfe);e.d.kb07proposed_schedSet[0].FibAdj=util.Formatter.amount(e.d.kb07proposed_schedSet[0].FibAdj);e.d.kb08adjustment_schedSet=e.d.kb08adjustment_schedSet.results;e.d.kb08adjustment_schedSet[0].GrossTcp=util.Formatter.amount(e.d.kb08adjustment_schedSet[0].GrossTcp);e.d.kb08adjustment_schedSet[0].Discount=util.Formatter.amount(e.d.kb08adjustment_schedSet[0].Discount);e.d.kb08adjustment_schedSet[0].NetTcp=util.Formatter.amount(e.d.kb08adjustment_schedSet[0].NetTcp);e.d.kb08adjustment_schedSet[0].Ttfe=util.Formatter.amount(e.d.kb08adjustment_schedSet[0].Ttfe);e.d.kb08adjustment_schedSet[0].FibAdj=util.Formatter.amount(e.d.kb08adjustment_schedSet[0].FibAdj);e.d.kb09summary_proposedSet=e.d.kb09summary_proposedSet.results;e.d.kb10summary_proposed_2Set=e.d.kb10summary_proposed_2Set.results;e.d.kb11deductionsSet=e.d.kb11deductionsSet.results;e.d.kb12discountsSet=e.d.kb12discountsSet.results;e.d.kb13resubmissionSet=e.d.kb13resubmissionSet.results;e.d.kb14contractdetail_expandedSet=e.d.kb14contractdetail_expandedSet.results;e.d.kb14contractdetail_expandedSet[0].SaleDate=sapDateFormat(e.d.kb14contractdetail_expandedSet[0].SaleDate);e.d.kb15current_priceSet=e.d.kb15current_priceSet.results;e.d.kb15current_priceSet[0].GrossTcp=util.Formatter.amount(e.d.kb15current_priceSet[0].GrossTcp);e.d.kb15current_priceSet[0].Discount=util.Formatter.amount(e.d.kb15current_priceSet[0].Discount);e.d.kb15current_priceSet[0].NetTcp=util.Formatter.amount(e.d.kb15current_priceSet[0].NetTcp);e.d.kb15current_priceSet[0].TotalTcp=util.Formatter.amount(e.d.kb15current_priceSet[0].TotalTcp);e.d.kb15current_priceSet[0].Forfeited=util.Formatter.amount(e.d.kb15current_priceSet[0].Forfeited);e.d.kb15current_priceSet[0].AppliedPay=util.Formatter.amount(e.d.kb15current_priceSet[0].AppliedPay);e.d.kb15current_priceSet[0].NetRestruc=util.Formatter.amount(e.d.kb15current_priceSet[0].NetRestruc);e.d.kb15current_priceSet[0].Ttfe=util.Formatter.amount(e.d.kb15current_priceSet[0].Ttfe);e.d.kb15current_priceSet[0].FibAdj=util.Formatter.amount(e.d.kb15current_priceSet[0].FibAdj);e.d.kb16buyerSet=e.d.kb16buyerSet.results;e.d.kb17agentSet=e.d.kb17agentSet.results;e.d.kb18related_contractsSet=e.d.kb18related_contractsSet.results;e.d.kb19paymentsSet=e.d.kb19paymentsSet.results;e.d.kb20penaltiesSet=e.d.kb20penaltiesSet.results;e.d.kb21summary_oldSet=e.d.kb21summary_oldSet.results;e.d.kb22summary_old_1Set=e.d.kb22summary_old_1Set.results;e.d.kb23summary_old_2Set=e.d.kb23summary_old_2Set.results;e.d.kb24summary_newSet=e.d.kb24summary_newSet.results;e.d.kb25summary_new_1Set=e.d.kb25summary_new_1Set.results;e.d.kb26summary_new_2Set=e.d.kb26summary_new_2Set.results;e.d.kb27installmentSet=e.d.kb27installmentSet.results;e.d.kb28particularsSet=e.d.kb28particularsSet.results;e.d.kb29scheduleSet=e.d.kb29scheduleSet.results;e.d.kb30spreadSet=e.d.kb30spreadSet.results;e.d.kb31remarksSet=e.d.kb31remarksSet.results;e.d.kb32save_reasonSet=e.d.kb32save_reasonSet.results;e.d.kb33recommendationSet=e.d.kb33recommendationSet.results;e.d.kb34current_schedSet=e.d.kb34current_schedSet.results;document.getElementById("currentItem").innerHTML=" > KBIncentive";showContent("kbIncentive","views.KBIncentive.KBIncentive","KBIncentive",e.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_PLANREV"){r=new sap.m.BusyDialog({text:"Retrieving Plan Revision details. Please wait..."});r.open();var a=new sap.ui.model.json.JSONModel;$.ajax({type:"GET",url:"/sap/opu/odata/SAP/ZGW_RLC_SALES_SRV/fldImportSet(Application='"+e.Application+"')?$format=json&$expand=fldstatusSet",dataType:"json",success:function(o){a.setData({fieldData:o});sap.ui.getCore().setModel(a);$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/PR_GetDetailsSet(RefNumber='"+e.requestNum+"')?$expand=PV_ReqPropSet,PV_BackDetSet,PV_RecommendationSet,approverSet/approverComment,PV_PlanRevDescriptionSet,PV_PlanRevSet&$format=json",dataType:"json",success:function(a){a.d.PV_PlanRevDescriptionSet=a.d.PV_PlanRevDescriptionSet.results[0];a.d.PV_PlanRevSet=a.d.PV_PlanRevSet.results;a.d.PV_ReqPropSet=a.d.PV_ReqPropSet.results;a.d.PV_BackDetSet=a.d.PV_BackDetSet.results;a.d.PV_RecommendationSet=a.d.PV_RecommendationSet.results;a.d.approverSet=a.d.approverSet.results;a.d.PV_PlanRevDescriptionSet.Punit3Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit3Tot);a.d.PV_PlanRevDescriptionSet.Punit3Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit3Tcp);a.d.PV_PlanRevDescriptionSet.Punit2Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit2Tot);a.d.PV_PlanRevDescriptionSet.Punit2Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit2Tcp);a.d.PV_PlanRevDescriptionSet.Punit1Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit1Tot);a.d.PV_PlanRevDescriptionSet.Punit1Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Punit1Tcp);a.d.PV_PlanRevDescriptionSet.Unit3Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit3Tot);a.d.PV_PlanRevDescriptionSet.Unit3Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit3Tcp);a.d.PV_PlanRevDescriptionSet.Unit2Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit2Tot);a.d.PV_PlanRevDescriptionSet.Unit2Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit2Tcp);a.d.PV_PlanRevDescriptionSet.Unit1Tot=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit1Tot);a.d.PV_PlanRevDescriptionSet.Unit1Tcp=util.Formatter.amount(a.d.PV_PlanRevDescriptionSet.Unit1Tcp);a.d.PV_PlanRevSet[0].CostBdd=util.Formatter.amount(a.d.PV_PlanRevSet[0].CostBdd);a.d.PV_PlanRevSet[0].CostDpd=util.Formatter.amount(a.d.PV_PlanRevSet[0].CostDpd);a.d.PV_PlanRevSet[0].CostPmd=util.Formatter.amount(a.d.PV_PlanRevSet[0].CostPmd);if(a.d.PV_PlanRevSet[0].BddDate=="00000000"){a.d.PV_PlanRevSet[0].BddDate=""}if(a.d.PV_PlanRevSet[0].DpdDate=="00000000"){a.d.PV_PlanRevSet[0].DpdDate=""}if(a.d.PV_PlanRevSet[0].PmdDate=="00000000"){a.d.PV_PlanRevSet[0].PmdDate=""}if(a.d.PV_PlanRevSet[0].ExpiryDate=="00000000"){a.d.PV_PlanRevSet[0].ExpiryDate=""}a.d.Refnumber=a.d.PV_PlanRevDescriptionSet.Refnumber;a.d.cutoff="";a.d.costPMD="0.00";a.d.costDPD="0.00";a.d.costBDD="0.00";a.d.datePMD="";a.d.dateDPD="";a.d.dateBDD="";var s="";s="";for(var n=0;n<a.d.PV_ReqPropSet.length;n++){if(s!="")s=s+"\n";s=s+a.d.PV_ReqPropSet[n].Line}a.d.PV_ReqPropSet=s;s="";for(var n=0;n<a.d.PV_BackDetSet.length;n++){if(s!="")s=s+"\n";s=s+a.d.PV_BackDetSet[n].Line}a.d.PV_BackDetSet=s;s="";for(var n=0;n<a.d.PV_RecommendationSet.length;n++){if(s!="")s=s+"\n";s=s+a.d.PV_RecommendationSet[n].Line}a.d.PV_RecommendationSet=s;s="";for(var n=0;n<a.d.approverSet.length;n++){s="";for(var d=0;d<a.d.approverSet[n].approverComment.results.length;d++){s=s+a.d.approverSet[n].approverComment.results[d].Line}a.d.approverSet[n].approverComment=s}t.getAttachments(a.d,e.requestNum);var i=false;var u=a.d.Attachments.length-1;for(var n=u;n>=0;n--){i=false;for(var d=0;d<o.d.fldstatusSet.results.length;d++){if(o.d.fldstatusSet.results[d].Fieldname==a.d.Attachments[n].Filecategory&&o.d.fldstatusSet.results[d].Hide!="X"){i=true;break}}if(!i){delete a.d.Attachments[n];a.d.Attachments.splice(n,1)}}oPlanRev_Type=a.d.PV_PlanRevDescriptionSet.RequestType;document.getElementById("currentItem").innerHTML=" > Plan Revision";showContent("PLANREVISION","views.Buyer.PlanRevision","PLANREVISION",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})},error:function(e){r.close();alert("No data retrieved for the selected request1.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_UNTAGLOG"){r=new sap.m.BusyDialog({text:"Retrieving Un-Tag Logging details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/TagLog_DetailSet(Refnumber='"+e.requestNum+"')?$expand=TagLog_JustificationText,TagLog_BackgroundText,TagLog_Items,TagLog_Approver/approverComment&$format=json",dataType:"json",success:function(a){a.d.TagLog_JustificationText=a.d.TagLog_JustificationText.results;a.d.TagLog_BackgroundText=a.d.TagLog_BackgroundText.results;a.d.TagLog_Items=a.d.TagLog_Items.results;a.d.TagLog_Approver=a.d.TagLog_Approver.results;a.d.OutBal=util.Formatter.amount(a.d.OutBal);a.d.TotTcp=util.Formatter.amount(a.d.TotTcp);a.d.Tcp=util.Formatter.amount(a.d.Tcp);a.d.Recnbeg=sapDateFormat(a.d.Recnbeg);a.d.RcvdDate=sapDateFormat(a.d.RcvdDate);a.d.Xgetxt=a.d.Xgetxt+" "+a.d.Xgrtxt;var o="";o="";for(var s=0;s<a.d.TagLog_JustificationText.length;s++){if(o!="")o=o+"\n";o=o+a.d.TagLog_JustificationText[s].Tdline}a.d.TagLog_JustificationText=o;o="";for(var s=0;s<a.d.TagLog_BackgroundText.length;s++){if(o!="")o=o+"\n";o=o+a.d.TagLog_BackgroundText[s].Tdline}a.d.TagLog_BackgroundText=o;for(var s=0;s<a.d.TagLog_Approver.length;s++){o="";for(var n=0;n<a.d.TagLog_Approver[s].approverComment.results.length;n++){o=o+a.d.TagLog_Approver[s].approverComment.results[n].Line}a.d.TagLog_Approver[s].approverComment=o}t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Un-Tag LOG Items";showContent("UNTAGLOG","views.UnTag.LogItems","UNTAGLOG",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_ADDEDIT"){r=new sap.m.BusyDialog({text:"Retrieving Agent Assignment details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/AEAgent_HeaderSet(Refnumber='"+e.requestNum+"')?$expand=agents,approvers/approverComment,remarks&$format=json",dataType:"json",success:function(a){a.d.agents=a.d.agents.results;a.d.approvers=a.d.approvers.results;a.d.remarks=a.d.remarks.results;a.d.genDetails=[{Project:a.d.Project,UnitType:a.d.UnitType,LotUnit:a.d.LotUnit,Area:a.d.Area,DateOfSale:a.d.DateOfSale,TcpAmount:a.d.TcpAmount,RelTranche:a.d.RelTranche}];var o="";o="";for(var s=0;s<a.d.remarks.length;s++){if(o!="")o=o+"\n";o=o+a.d.remarks[s].Line}a.d.remarks=o;for(var s=0;s<a.d.approvers.length;s++){o="";for(var n=0;n<a.d.approvers[s].approverComment.results.length;n++){o=o+a.d.approvers[s].approverComment.results[n].Line}a.d.approvers[s].approverComment=o}t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Add/Edit Agent Assignment";showContent("ASSIGNMENT","views.Agent.Assignment","ASSIGNMENT",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_AASPECIAL"){r=new sap.m.BusyDialog({text:"Retrieving Agent Assignment details. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_SRV/aas_headerSet(RefNumber='"+e.requestNum+"')?$expand=aas_DetailsSet,approverSet/approverComment,remarksSet&$format=json",dataType:"json",success:function(a){a.d.aas_DetailsSet=a.d.aas_DetailsSet.results;a.d.approverSet=a.d.approverSet.results;a.d.remarksSet=a.d.remarksSet.results;a.d.Refnumber=a.d.aas_DetailsSet[0].Refnumber;a.d.aas_DetailsSet[0].ForfeitAmt=util.Formatter.amount(a.d.aas_DetailsSet[0].ForfeitAmt);a.d.aas_DetailsSet[0].RefundAmt=util.Formatter.amount(a.d.aas_DetailsSet[0].RefundAmt);a.d.aas_DetailsSet[0].TotPenalty=util.Formatter.amount(a.d.aas_DetailsSet[0].TotPenalty);a.d.aas_DetailsSet[0].TotTransfer=util.Formatter.amount(a.d.aas_DetailsSet[0].TotTransfer);a.d.aas_DetailsSet[0].TcpAmount=util.Formatter.amount(a.d.aas_DetailsSet[0].TcpAmount);a.d.aas_DetailsSet[0].SaleDate=sapDateFormat(a.d.aas_DetailsSet[0].SaleDate);if(a.d.aas_DetailsSet[0].JgEmployee==""){a.d.aas_DetailsSet[0].JgEmployee="No"}else{a.d.aas_DetailsSet[0].JgEmployee="Yes"}a.d.contractdet=[{Building:a.d.aas_DetailsSet[0].Building,UnitType:a.d.aas_DetailsSet[0].UnitType,Lot:a.d.aas_DetailsSet[0].Lot,Area:a.d.aas_DetailsSet[0].Area,SaleDate:a.d.aas_DetailsSet[0].SaleDate,TcpAmount:a.d.aas_DetailsSet[0].TcpAmount,Scheme:a.d.aas_DetailsSet[0].Scheme}];var o="";for(var s=0;s<a.d.remarksSet.length;s++){if(o!="")o=o+"\n";o=o+a.d.remarksSet[s].Line}a.d.remarksSet=o;o="";for(var s=0;s<a.d.approverSet.length;s++){o="";for(var n=0;n<a.d.approverSet[s].approverComment.results.length;n++){o=o+a.d.approverSet[s].approverComment.results[n].Line}a.d.approverSet[s].approverComment=o}t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Account Adjustment Special";showContent("AASPECIAL","views.Buyer.AccntAdjSpecial","AASPECIAL",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}else if(e.Application=="RES_RESTRUCTRE"){r=new sap.m.BusyDialog({text:"Retrieving details for restructure. Please wait..."});r.open();$.ajax({type:"GET",url:"/sap/opu/odata/SAP/ZGW_RLC_SALES_SRV/C01ContainerSet(Refnumber='"+e.requestNum+"')?$format=json&$expand=C02TerxReasonSet,C03SchemeSet,C04Scheme2Set,C05ApproversSet/C05CommentsSet,C06HeaderSet,C07ProposedScheSet,C08AdjustmentScSet,C09SummaryPropoSet,C10SummaryProp2Set,C11DeductionsSet,C12DiscountsSet,C13ResubmissionSet,C14ContractDetaSet,C15CurrentPriceSet,C16BuyerSet,C17AgentSet,C18RelatedContrSet,C19PaymentsSet,C20PenaltiesSet,C21SummaryOldSet,C22SummaryOld1Set,C23SummaryOld2Set,C24SummaryNewSet,C25SummaryNew1Set,C26SummaryNew2Set,C27InstallmentSet,C28ParticularsSet,C29ScheduleSet,C30SpreadSet,C31RemarksSet,C32SaveReasonSet,C33RecommendatiSet",dataType:"json",success:function(a){a.d.C02TerxReasonSet=a.d.C02TerxReasonSet.results;a.d.C03SchemeSet=a.d.C03SchemeSet.results;a.d.C04Scheme2Set=a.d.C04Scheme2Set.results;a.d.C05ApproversSet=a.d.C05ApproversSet.results;a.d.C06HeaderSet=a.d.C06HeaderSet.results;a.d.C07ProposedScheSet=a.d.C07ProposedScheSet.results;a.d.C07ProposedScheSet[0].GrossTcp=util.Formatter.amount(a.d.C07ProposedScheSet[0].GrossTcp);a.d.C07ProposedScheSet[0].Discount=util.Formatter.amount(a.d.C07ProposedScheSet[0].Discount);a.d.C07ProposedScheSet[0].NetTcp=util.Formatter.amount(a.d.C07ProposedScheSet[0].NetTcp);a.d.C07ProposedScheSet[0].Ttfe=util.Formatter.amount(a.d.C07ProposedScheSet[0].Ttfe);a.d.C07ProposedScheSet[0].FibAdj=util.Formatter.amount(a.d.C07ProposedScheSet[0].FibAdj);a.d.C08AdjustmentScSet=a.d.C08AdjustmentScSet.results;a.d.C08AdjustmentScSet[0].GrossTcp=util.Formatter.amount(a.d.C08AdjustmentScSet[0].GrossTcp);a.d.C08AdjustmentScSet[0].Discount=util.Formatter.amount(a.d.C08AdjustmentScSet[0].Discount);a.d.C08AdjustmentScSet[0].NetTcp=util.Formatter.amount(a.d.C08AdjustmentScSet[0].NetTcp);a.d.C08AdjustmentScSet[0].Ttfe=util.Formatter.amount(a.d.C08AdjustmentScSet[0].Ttfe);a.d.C08AdjustmentScSet[0].FibAdj=util.Formatter.amount(a.d.C08AdjustmentScSet[0].FibAdj);a.d.C09SummaryPropoSet=a.d.C09SummaryPropoSet.results;a.d.C10SummaryProp2Set=a.d.C10SummaryProp2Set.results;a.d.C11DeductionsSet=a.d.C11DeductionsSet.results;a.d.C12DiscountsSet=a.d.C12DiscountsSet.results;a.d.C13ResubmissionSet=a.d.C13ResubmissionSet.results;a.d.C14ContractDetaSet=a.d.C14ContractDetaSet.results;a.d.C14ContractDetaSet[0].SaleDate=sapDateFormat(a.d.C14ContractDetaSet[0].SaleDate);a.d.C15CurrentPriceSet=a.d.C15CurrentPriceSet.results;a.d.C15CurrentPriceSet[0].GrossTcp=util.Formatter.amount(a.d.C15CurrentPriceSet[0].GrossTcp);a.d.C15CurrentPriceSet[0].Discount=util.Formatter.amount(a.d.C15CurrentPriceSet[0].Discount);a.d.C15CurrentPriceSet[0].NetTcp=util.Formatter.amount(a.d.C15CurrentPriceSet[0].NetTcp);a.d.C15CurrentPriceSet[0].TotalTcp=util.Formatter.amount(a.d.C15CurrentPriceSet[0].TotalTcp);a.d.C15CurrentPriceSet[0].Forfeited=util.Formatter.amount(a.d.C15CurrentPriceSet[0].Forfeited);a.d.C15CurrentPriceSet[0].AppliedPay=util.Formatter.amount(a.d.C15CurrentPriceSet[0].AppliedPay);a.d.C15CurrentPriceSet[0].NetRestruc=util.Formatter.amount(a.d.C15CurrentPriceSet[0].NetRestruc);a.d.C15CurrentPriceSet[0].Ttfe=util.Formatter.amount(a.d.C15CurrentPriceSet[0].Ttfe);a.d.C15CurrentPriceSet[0].FibAdj=util.Formatter.amount(a.d.C15CurrentPriceSet[0].FibAdj);a.d.C16BuyerSet=a.d.C16BuyerSet.results;a.d.C17AgentSet=a.d.C17AgentSet.results;a.d.C18RelatedContrSet=a.d.C18RelatedContrSet.results;a.d.C19PaymentsSet=a.d.C19PaymentsSet.results;a.d.C20PenaltiesSet=a.d.C20PenaltiesSet.results;a.d.C21SummaryOldSet=a.d.C21SummaryOldSet.results;a.d.C22SummaryOld1Set=a.d.C22SummaryOld1Set.results;a.d.C23SummaryOld2Set=a.d.C23SummaryOld2Set.results;a.d.C24SummaryNewSet=a.d.C24SummaryNewSet.results;a.d.C25SummaryNew1Set=a.d.C25SummaryNew1Set.results;a.d.C26SummaryNew2Set=a.d.C26SummaryNew2Set.results;a.d.C27InstallmentSet=a.d.C27InstallmentSet.results;a.d.C28ParticularsSet=a.d.C28ParticularsSet.results;a.d.C29ScheduleSet=a.d.C29ScheduleSet.results;a.d.C30SpreadSet=a.d.C30SpreadSet.results;a.d.C31RemarksSet=a.d.C31RemarksSet.results;a.d.C32SaveReasonSet=a.d.C32SaveReasonSet.results;a.d.C33RecommendatiSet=a.d.C33RecommendatiSet.results;var o=0;var s=0;var n=0;var d=0;for(var i=0;i<a.d.C30SpreadSet.length;i++){o=o+Number(a.d.C30SpreadSet[i].Status.replace(/,/g,""));s=s+Number(a.d.C30SpreadSet[i].Tcp.replace(/,/g,""));n=n+Number(a.d.C30SpreadSet[i].Ttfe.replace(/,/g,""));d=d+Number(a.d.C30SpreadSet[i].Total.replace(/,/g,""))}a.d.TotalSpreadSet={totalPayApp:util.Formatter.amount(o),totalTCP:util.Formatter.amount(s),totalTTFE:util.Formatter.amount(n),totalSpread:util.Formatter.amount(d)};var u="";for(var l=0;l<a.d.C05ApproversSet.length;l++){u="";for(var m=0;m<a.d.C05ApproversSet[l].C05CommentsSet.results.length;m++){u=u+a.d.C05ApproversSet[l].C05CommentsSet.results[m].Line}a.d.C05ApproversSet[l].C05CommentsSet=u}u="";for(var l=0;l<a.d.C33RecommendatiSet.length;l++){if(u!="")u=u+"\n";u=u+a.d.C33RecommendatiSet[l].Line}a.d.C33RecommendatiSet=u;u="";for(var l=0;l<a.d.C31RemarksSet.length;l++){if(u!="")u=u+"\n";u=u+a.d.C31RemarksSet[l].Line}a.d.C31RemarksSet=u;t.getAttachments(a.d,e.requestNum);document.getElementById("currentItem").innerHTML=" > Restructure";showContent("reStructure","views.Buyer.Restructure","Restructure",a.d);r.close()},error:function(e){r.close();alert("No data retrieved for the selected request.\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}},getAttachments:function(e,t){$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_RLC_SALES_ATTACHMENT_SRV/AttachmentSet?$filter=Refnumber eq '"+t+"'&$format=json",headers:{"X-CSRF-Token":"Fetch","X-Requested-With":"XMLHttpRequest"},async:false,contentType:"application/json",success:function(t,r,a){e.Attachments=t.d.results},error:function(e){alert("Error: \nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})},sample4POS:function(){$.ajax({type:"GET",url:"/sap/opu/odata/sap/ZGW_SAP_POS_SERVICE_SRV/",headers:{"X-CSRF-Token":"Fetch","X-Requested-With":"XMLHttpRequest"},async:false,contentType:"application/json",success:function(e,t,r){var a=r.getResponseHeader("X-CSRF-Token");var o={Mandt:"600",Auton:"1",Vkorg:"BCFG",Vtweg:"99",Kunnr:"UI5",Spart:"95",Werks:"6000",Artnr:"223341",Trtyp:"1",Trdat:"11/17/2015",Crdno:"MTCB",Waers:"PHP",NonCash:"1000.00",Cash:"0.00",Disct:"0.00",Vatmt:"120.00",Menge:"1.00",Meins:"KG"};$.ajax({type:"POST",url:"/sap/opu/odata/sap/ZGW_SAP_POS_SERVICE_SRV/S_ITEMSet",headers:{"X-CSRF-Token":a,"X-Requested-With":"JSONHttpRequest"},async:true,contentType:"application/json",dataType:"json",data:JSON.stringify(o),success:function(e,t,r){alert("Success!/n"+e)},error:function(e){alert("Error2!\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})},error:function(e){alert("Error!\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})},sampleGetToken:function(){$.ajax({type:"GET",url:"/sap/opu/odata/IWWRK/WFSERVICE",headers:{"X-CSRF-Token":"Fetch","X-Requested-With":"XMLHttpRequest"},async:false,contentType:"application/json",success:function(e,t,r){var a=r.getResponseHeader("X-CSRF-Token");alert("vToken!"+a)},error:function(e){alert("Error2!\nStatus Code: "+e.status+"\ndescription: "+e.statusText+"\n"+e.responseText)}})}});
//# sourceMappingURL=Home.controller.js.map